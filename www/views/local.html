<div class="page-header">
    <h1>Local <small>WIFI</small></h1>
</div>

<form class="form-inline">
    <h4>Connect</h4>

    <div class="progress" ng-show="MqttClient.Status === 'connecting'">
        <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
            <span class="sr-only">Connecting</span>
        </div>
    </div>

    <div class="form-group">
        <label class="sr-only" for="">Connect to Broker</label>
        <div class="input-group">
            <div class="input-group-addon">Connect to</div>
            <input type="text" class="form-control" id="" placeholder="Broker" ng-value="Settings.LocalMQTTBroker.Host">
            <div class="input-group-addon">{{ MqttClient.Status || 'disconnected' }}</div>
        </div>
    </div>

    <div class="btn-group btn-group-justified" role="group" aria-label="...">
        <a ng-click="Connect()" ng-show="MqttClient.Status !== 'connected'" role="button" class="btn btn-primary">
            <span class="glyphicon glyphicon-link" aria-hidden="true"></span> Connect
        </a>
    </div>
</form>

<form class="form-inline" ng-show="MqttClient.Status === 'connected'">
    <h4>Subscribe</h4>

    <div class="form-group">
        <div class="input-group">
            <div class="input-group-addon">Topic</div>
            <input ng-model="MqttSubscription.topic" type="text" class="form-control" id="" placeholder="Topic">
        </div>
    </div>

    <div class="form-group">
        <div class="input-group">
            <div class="input-group-addon">QoS</div>
            <select ng-model="MqttSubscription.qos" class="form-control">
                <option value="0">At most once</option>
                <option value="1">At least once</option>
                <option value="2">Exactly once</option>
            </select>
        </div>
    </div>

    <div class="btn-group btn-group-justified" role="group" aria-label="...">
        <a ng-click="Subscribe()" role="button" class="btn btn-primary">
            <span class="glyphicon glyphicon-download" aria-hidden="true"></span> Subscribe
        </a>
    </div>
</form>

<form class="form-inline" ng-show="MqttClient.Status === 'connected'">
    <h4>Publish</h4>

    <div class="form-group">
        <div class="input-group">
            <div class="input-group-addon">Topic</div>
            <input ng-model="MqttPublication.topic" type="text" class="form-control" id="" placeholder="Topic">
        </div>
    </div>

    <div class="form-group" ng-show="false">
        <div class="input-group">
            <div class="input-group-addon">QoS</div>
            <select ng-model="MqttPublication.qos" class="form-control">
                <option value="0">At most once</option>
                <option value="1">At least once</option>
                <option value="2">Exactly once</option>
            </select>
        </div>
    </div>

    <div class="form-group">
        <div class="input-group">
            <div class="input-group-addon">Payload</div>
            <input ng-model="MqttPublication.payload" type="text" class="form-control" id="" placeholder="Payload">
        </div>
    </div>

    <div class="btn-group btn-group-justified" role="group" aria-label="...">
        <a ng-click="Publish()" role="button" class="btn btn-primary">
            <span class="glyphicon glyphicon-upload" aria-hidden="true"></span> Publish
        </a>
    </div>
</form>

<table class="table table-condensed">
    <thead>
        <tr>
            <th>Topic</th>
            <th>Payload</th>
        </tr>
    </thead>
    <tbody>
        <tr ng-repeat="(topic, payload) in MqttSubscriptions">
            <td>{{ topic }}</td>
            <td>{{ payload }}</td>
        </tr>
    </tbody>
</table>